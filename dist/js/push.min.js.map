{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"window\"","webpack:///external \"jQuery\"","webpack:///./assets/js/push.js","webpack:///external \"_\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","jQuery","selectedConnections","searchString","processTemplate","_","memoize","id","element","document","getElementById","template","innerHTML","evaluate","interpolate","escape","on","distributorAdminItem","querySelector","distributorTopMenu","distributorMenuItem","distributorPushWrapper","dtConnections","connectionsSelected","connectionsSelectedList","connectionsNewList","connectionsNewListChildren","connectionsAvailableTotal","selectAllConnections","selectNoConnections","connectionsSearchInput","postStatusInput","asDraftInput","appendChild","addEventListener","e","keyCode","distributorMenuEntered","classList","contains","add","data","action","nonce","dt","connections","postId","postStatus","checked","xhr","usexhr","withCredentials","ajax","url","ajaxurl","xhrFields","method","done","response","setTimeout","results","error","remove","map","type","each","result","connectionId","status","syndicated","doError","innerText","showConnections","event","target","nodeName","preventDefault","currentTarget","getAttribute","deleteNode","parentNode","removeChild","keys","length","cloneNode","removeLink","createElement","children","index","childTarget","firstChild","connection","nameMatch","replace","toLowerCase","match","urlMatch","showConnection","expr","focus","loadConnectionsNonce","success","querySelectorAll","debounce"],"mappings":"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","file":"push.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n","module.exports = window;","module.exports = jQuery;","import jQuery from 'jquery';\nimport _ from 'underscores';\nimport { dt } from 'window';\n\nlet selectedConnections = {},\n\tsearchString        = '';\nconst processTemplate = _.memoize( ( id ) => {\n\tconst element = document.getElementById( id );\n\tif ( ! element ) {\n\t\treturn false;\n\t}\n\n\t// Use WordPress style Backbone template syntax\n\tconst options = {\n\t\tevaluate:    /<#([\\s\\S]+?)#>/g,\n\t\tinterpolate: /{{{([\\s\\S]+?)}}}/g,\n\t\tescape:      /{{([^}]+?)}}(?!})/g\n\t};\n\n\treturn _.template( element.innerHTML, null, options );\n} );\n\njQuery( window ).on( 'load', () => {\n\tconst distributorAdminItem    = document.querySelector( '#wp-admin-bar-distributor > a' );\n\tconst distributorTopMenu      = document.querySelector( '#wp-admin-bar-distributor' );\n\tconst distributorMenuItem     = document.querySelector( '#wp-admin-bar-distributor #wp-admin-bar-distributor-placeholder' );\n\tconst distributorPushWrapper  = document.querySelector( '#distributor-push-wrapper' );\n\n\tif ( ! distributorMenuItem || ! distributorPushWrapper ) {\n\t\treturn;\n\t}\n\n\tlet dtConnections           \t\t= '';\n\tlet connectionsSelected     \t\t= '';\n\tlet connectionsSelectedList \t\t= '';\n\tlet connectionsNewList      \t\t= '';\n\tlet connectionsNewListChildren    \t= '';\n\tlet connectionsAvailableTotal\t\t= '';\n\tlet selectAllConnections \t\t\t= '';\n\tlet selectNoConnections\t\t\t\t= '';\n\tlet connectionsSearchInput  \t\t= '';\n\tlet postStatusInput         \t\t= '';\n\tlet asDraftInput            \t\t= '';\n\n\tdistributorMenuItem.appendChild( distributorPushWrapper );\n\n\t/**\n\t * Set variables after connections have been rendered\n\t */\n\tfunction setVariables() {\n\t\tconnectionsSelected     \t= distributorPushWrapper.querySelector( '.connections-selected' );\n\t\tconnectionsSelectedList \t= distributorPushWrapper.querySelector( '.selected-connections-list' );\n\t\tconnectionsNewList      \t= distributorPushWrapper.querySelector( '.new-connections-list' );\n\t\tselectAllConnections \t\t= distributorPushWrapper.querySelector( '.selectall-connections' );\n\t\tselectNoConnections \t\t= distributorPushWrapper.querySelector( '.selectno-connections' );\n\t\tconnectionsSearchInput  \t= document.getElementById( 'dt-connection-search' );\n\t\tpostStatusInput         \t= document.getElementById( 'dt-post-status' );\n\t\tasDraftInput            \t= document.getElementById( 'dt-as-draft' );\n\n\t\tif ( null !== connectionsNewList ){\n\t\t\tconnectionsNewListChildren  = connectionsNewList.querySelectorAll( '.add-connection' );\n\t\t}\n\n\t\t/**\n\t\t * Listen for connection filtering\n\t\t */\n\t\tjQuery( connectionsSearchInput ).on( 'keyup change', _.debounce( ( event ) => {\n\t\t\tif ( '' === event.currentTarget.value ) {\n\t\t\t\tshowConnections( dtConnections );\n\t\t\t}\n\t\t\tsearchString = event.currentTarget.value.replace( /https?:\\/\\//i, '' ).replace( /www/i, '' ).replace( /[^0-9a-zA-Z ]+/, '' );\n\t\t\tshowConnections();\n\t\t}, 300 ) );\n\n\t\t/**\n\t\t * Disable select all button if all connections are syndicated and set variable for total connections available\n\t\t */\n\t\t_.each( connectionsNewListChildren, ( element ) => {\n\t\t\tif ( ! element.classList.contains ( 'syndicated' ) ) {\n\t\t\t\tselectAllConnections.classList.remove( 'unavailable' );\n\t\t\t\tconnectionsAvailableTotal ++;\n\t\t\t}\n\t\t} );\n\n\t}\n\n\t/**\n\t * Handle UI error changes\n\t */\n\tfunction doError() {\n\t\tdistributorPushWrapper.classList.add( 'message-error' );\n\n\t\tsetTimeout( () => {\n\t\t\tdistributorPushWrapper.classList.remove( 'message-error' );\n\t\t}, 6000 );\n\t}\n\n\t/**\n\t * Handle UI success changes\n\t */\n\tfunction doSuccess( results ) {\n\t\tlet error = false;\n\n\t\t[ 'internal', 'external' ].map( type => {\n\t\t\t_.each( results[type], ( result, connectionId ) => {\n\t\t\t\tif ( 'fail' === result.status ) {\n\t\t\t\t\terror = true;\n\t\t\t\t} else {\n\t\t\t\t\tdtConnections[ `${type}${ connectionId }` ].syndicated = result.url;\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t\tif ( error ) {\n\t\t\tdoError();\n\t\t} else {\n\t\t\tdistributorPushWrapper.classList.add( 'message-success' );\n\n\t\t\tconnectionsSelected.classList.add( 'empty' );\n\t\t\tconnectionsSelectedList.innerText = '';\n\n\t\t\tsetTimeout( () => {\n\t\t\t\tdistributorPushWrapper.classList.remove( 'message-success' );\n\t\t\t}, 6000 );\n\t\t}\n\n\t\tselectedConnections = {};\n\n\t\tshowConnections();\n\t}\n\n\t/**\n\t * Show connections. If there is a search string, then filter by it\n\t*/\n\tfunction showConnections() {\n\t\tconnectionsNewList.innerText = '';\n\n\t\t_.each( dtConnections, ( connection ) => {\n\t\t\tif ( '' !== searchString ) {\n\t\t\t\tconst nameMatch = connection.name.replace( /[^0-9a-zA-Z ]+/, '' ).toLowerCase().match( searchString.toLowerCase() );\n\t\t\t\tconst urlMatch  = connection.url.replace( /https?:\\/\\//i, '' ).replace( /www/i, '' ).replace( /[^0-9a-zA-Z ]+/, '' ).toLowerCase().match( searchString.toLowerCase() );\n\n\t\t\t\tif ( ! nameMatch && ! urlMatch ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst showConnection = processTemplate( 'dt-add-connection' )( {\n\t\t\t\tconnection: connection,\n\t\t\t\tselectedConnections: selectedConnections\n\t\t\t} );\n\n\t\t\tconnectionsNewList.innerHTML += showConnection;\n\t\t} );\n\n\t\tif ( '' === connectionsNewList.innerHTML ) {\n\t\t\tconnectionsNewList.innerHTML = '<p class=\"no-results\">No results</p>';\n\t\t}\n\t}\n\n\t/**\n\t * Add or remove CSS classes to indicate button functionality\n\t*/\n\tfunction classList( expr ) {\n\t\tswitch ( expr ) {\n\t\t\t\tcase 'addEmpty':\n\t\t\t\t\tconnectionsSelected.classList.add( 'empty' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'removeEmpty':\n\t\t\t\t\tconnectionsSelected.classList.remove( 'empty' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'allUnavailable':\n\t\t\t\t\tselectAllConnections.classList.add ( 'unavailable' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'all':\n\t\t\t\t\tselectAllConnections.classList.remove ( 'unavailable' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'noneUnavailable':\n\t\t\t\t\tselectNoConnections.classList.add ( 'unavailable' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'none':\n\t\t\t\t\tselectNoConnections.classList.remove ( 'unavailable' );\n\t\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Handle distributor push dropdown menu.\n\t */\n\tfunction distributorMenuEntered() {\n\t\tdistributorMenuItem.focus();\n\n\t\tif ( distributorPushWrapper.classList.contains( 'loaded' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdistributorPushWrapper.classList.remove( 'message-error' );\n\t\tdistributorPushWrapper.classList.add( 'loaded' );\n\n\t\tconst data = {\n\t\t\taction: 'dt_load_connections',\n\t\t\tloadConnectionsNonce: dt.loadConnectionsNonce,\n\t\t\tpostId: dt.postId\n\t\t};\n\n\t\tconst xhr = dt.usexhr ? { withCredentials: true } : false;\n\n\t\tjQuery.ajax( {\n\t\t\turl: dt.ajaxurl,\n\t\t\txhrFields: xhr,\n\t\t\tmethod: 'post',\n\t\t\tdata: data\n\t\t} ).done( ( response ) => {\n\t\t\tif ( ! response.success || ! response.data ) {\n\t\t\t\tdistributorPushWrapper.classList.remove( 'loaded' );\n\t\t\t\tdistributorPushWrapper.classList.add( 'message-error' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdtConnections = response.data;\n\n\t\t\tdistributorPushWrapper.innerHTML = processTemplate( 'dt-show-connections' )( {\n\t\t\t\tconnections: dtConnections,\n\t\t\t} );\n\n\t\t\tsetVariables();\n\t\t} ).error( () => {\n\t\t\tdistributorPushWrapper.classList.remove( 'loaded' );\n\t\t\tdistributorPushWrapper.classList.add( 'message-error' );\n\t\t} );\n\t}\n\n\t// Event listerners when to fetch distributor data.\n\tdistributorAdminItem.addEventListener( 'keydown', function( e ) {\n\t\t// Pressing Enter.\n\t\tif ( ( 13 === e.keyCode ) ) {\n\t\t\tdistributorMenuEntered();\n\t\t}\n\t}, false );\n\n\tdistributorAdminItem.addEventListener( 'touchstart', distributorMenuEntered, false );\n\tdistributorAdminItem.addEventListener( 'mouseenter', distributorMenuEntered, false );\n\n\t/**\n\t * Do syndication ajax\n\t */\n\tjQuery( distributorPushWrapper ).on( 'click', '.syndicate-button', () => {\n\t\tif ( distributorTopMenu.classList.contains( 'syncing' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdistributorTopMenu.classList.add( 'syncing' );\n\n\t\tconst data = {\n\t\t\taction: 'dt_push',\n\t\t\tnonce: dt.nonce,\n\t\t\tconnections: selectedConnections,\n\t\t\tpostId: dt.postId\n\t\t};\n\n\t\tdata.postStatus = ( null !== asDraftInput && asDraftInput.checked ) ? 'draft' : postStatusInput.value;\n\n\t\tconst xhr = dt.usexhr ? { withCredentials: true } : false;\n\n\t\tjQuery.ajax( {\n\t\t\turl: dt.ajaxurl,\n\t\t\txhrFields: xhr,\n\t\t\tmethod: 'post',\n\t\t\tdata: data\n\t\t} ).done( ( response ) => {\n\t\t\tsetTimeout( () => {\n\t\t\t\tdistributorTopMenu.classList.remove( 'syncing' );\n\n\t\t\t\tif ( ! response.data || ! response.data.results ) {\n\t\t\t\t\tdoError();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdoSuccess( response.data.results );\n\t\t\t}, 500 );\n\t\t} ).error( () => {\n\t\t\tsetTimeout( () => {\n\t\t\t\tdistributorTopMenu.classList.remove( 'syncing' );\n\n\t\t\t\tdoError();\n\t\t\t}, 500 );\n\t\t} );\n\t} );\n\n\t/**\n\t * Add a connection to selected connections for ajax and to the UI list.\n\t */\n\tjQuery( distributorPushWrapper ).on( 'click', '.add-connection', ( event ) => {\n\t\tif ( 'A' === event.target.nodeName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\tif ( event.currentTarget.classList.contains( 'syndicated' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( event.currentTarget.classList.contains( 'added' ) ) {\n\t\t\tconst type = event.currentTarget.getAttribute( 'data-connection-type' );\n\t\t\tconst id   = event.currentTarget.getAttribute( 'data-connection-id' );\n\n\t\t\tconst deleteNode = connectionsSelectedList.querySelector( `[data-connection-id=\"${ id }\"][data-connection-type=\"${ type }\"]` );\n\n\t\t\tdeleteNode.parentNode.removeChild( deleteNode );\n\n\t\t\tdelete selectedConnections[type + id];\n\n\t\t\tif ( selectAllConnections.classList.contains ( 'unavailable' ) ) {\n\t\t\t\tclassList ( 'all' );\n\t\t\t}\n\t\t\tif ( ! Object.keys( selectedConnections ).length ) {\n\t\t\t\tclassList ( 'addEmpty' );\n\t\t\t\tclassList ( 'noneUnavailable' );\n\t\t\t}\n\n\t\t\tshowConnections();\n\t\t} else {\n\t\t\tconst type = event.currentTarget.getAttribute( 'data-connection-type' );\n\t\t\tconst id   = event.currentTarget.getAttribute( 'data-connection-id' );\n\n\t\t\tselectedConnections[type + id] = dtConnections[type + id];\n\n\t\t\tconst element = event.currentTarget.cloneNode( true );\n\n\t\t\tconst removeLink = document.createElement( 'span' );\n\t\t\tremoveLink.classList.add( 'remove-connection' );\n\n\t\t\telement.appendChild( removeLink );\n\t\t\telement.classList = 'added-connection';\n\n\t\t\tconnectionsSelectedList.appendChild( element );\n\n\t\t\tif ( selectNoConnections.classList.contains ( 'unavailable' ) ) {\n\t\t\t\tclassList ( 'removeEmpty' );\n\t\t\t\tclassList ( 'none' );\n\t\t\t}\n\n\t\t\tif ( Object.keys( selectedConnections ).length == connectionsAvailableTotal ){\n\t\t\t\tclassList ( 'allUnavailable' );\n\t\t\t}\n\n\t\t\tshowConnections();\n\t\t}\n\t} );\n\n\t/**\n\t * Select all connections for distribution.\n\t*/\n\tjQuery( distributorPushWrapper ).on( 'click', '.selectall-connections', () => {\n\t\tjQuery ( connectionsNewList ).children( '.add-connection' ).each( ( index, childTarget ) => {\n\t\t\tif ( childTarget.classList.contains( 'syndicated' ) || childTarget.classList.contains( 'added' ) ) {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tconst type = childTarget.getAttribute( 'data-connection-type' );\n\t\t\t\tconst id   = childTarget.getAttribute( 'data-connection-id' );\n\n\t\t\t\tselectedConnections[type + id] = dtConnections[type + id];\n\n\t\t\t\tconst element     = childTarget.cloneNode();\n\t\t\t\telement.innerText = childTarget.innerText;\n\n\t\t\t\tconst removeLink = document.createElement( 'span' );\n\t\t\t\tremoveLink.classList.add( 'remove-connection' );\n\n\t\t\t\telement.appendChild( removeLink );\n\t\t\t\telement.classList = 'added-connection';\n\n\t\t\t\tconnectionsSelectedList.appendChild( element );\n\n\t\t\t}\n\n\t\t\tif ( '' !== connectionsAvailableTotal ) {\n\t\t\t\tclassList ( 'removeEmpty' );\n\t\t\t\tclassList ( 'allUnavailable' );\n\t\t\t\tclassList ( 'none' );\n\t\t\t}\n\n\t\t} );\n\n\t\tshowConnections();\n\t} );\n\n\t/**\n\t * Select no connections for distribution.\n\t*/\n\tjQuery( distributorPushWrapper ).on( 'click', '.selectno-connections', () => {\n\n\t\twhile ( connectionsSelectedList.firstChild ) {\n\t\t\tconst type = connectionsSelectedList.firstChild.getAttribute( 'data-connection-type' );\n\t\t\tconst id   = connectionsSelectedList.firstChild.getAttribute( 'data-connection-id' );\n\n\t\t\tdelete selectedConnections[type + id];\n\n\t\t\tconnectionsSelectedList.removeChild( connectionsSelectedList.firstChild );\n\n\t\t}\n\n\t\tif ( '' !== connectionsAvailableTotal ) {\n\t\t\tclassList ( 'addEmpty' );\n\t\t\tclassList ( 'noneUnavailable' );\n\t\t\tclassList ( 'all' );\n\t\t}\n\n\t\tshowConnections();\n\t} );\n\n\t/**\n\t * Remove a connection from selected connections and the UI list\n\t */\n\tjQuery( distributorPushWrapper ).on( 'click', '.added-connection', ( event ) => {\n\t\tevent.currentTarget.parentNode.removeChild( event.currentTarget );\n\t\tconst type = event.currentTarget.getAttribute( 'data-connection-type' );\n\t\tconst id   = event.currentTarget.getAttribute( 'data-connection-id' );\n\n\t\tdelete selectedConnections[type + id];\n\n\t\tif ( selectAllConnections.classList.contains ( 'unavailable' ) ) {\n\t\t\tclassList ( 'all' );\n\t\t}\n\t\tif ( ! Object.keys( selectedConnections ).length ) {\n\t\t\tclassList ( 'addEmpty' );\n\t\t\tclassList ( 'noneUnavailable' );\n\t\t}\n\n\t\tshowConnections();\n\t} );\n} );\n","module.exports = _;"],"sourceRoot":""}