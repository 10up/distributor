!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t){e.exports=jQuery},function(e,t){e.exports=window},function(e,t){e.exports=_},,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(0),a=r(o),c=n(2),i=r(c),s=n(1),d={},u="",l=i.default.memoize(function(e){var t=document.getElementById(e);if(!t)return!1;var n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g};return i.default.template(t.innerHTML,null,n)});(0,a.default)(window).on("load",function(){function e(){f.classList.add("message-error"),setTimeout(function(){f.classList.remove("message-error")},6e3)}function t(t){var r=!1;i.default.each(t.internal,function(e,t){"fail"===e.status?r=!0:s.dtConnections["internal"+t].syndicated=e.url}),i.default.each(t.external,function(e,t){"fail"===e.status?r=!0:s.dtConnections["external"+t].syndicated=!0}),r?e():(f.classList.add("message-success"),p.classList.add("empty"),m.innerText="",setTimeout(function(){f.classList.remove("message-success")},6e3)),d={},n()}function n(){g.innerText="",i.default.each(s.dtConnections,function(e){if(""!==u){var t=e.name.replace(/[^0-9a-zA-Z ]+/,"").toLowerCase().match(u.toLowerCase()),n=e.url.replace(/https?:\/\//i,"").replace(/www/i,"").replace(/[^0-9a-zA-Z ]+/,"").toLowerCase().match(u.toLowerCase());if(!t&&!n)return}var r=l("dt-add-connection")({connection:e,selectedConnections:d});g.innerHTML+=r})}function r(){c.focus(),document.body.classList.toggle("distributor-show")}function o(){c.blur(),document.body.classList.toggle("distributor-show")}var c=document.querySelector("#wp-admin-bar-distributor"),f=document.querySelector("#distributor-push-wrapper");if(c&&f){var p=f.querySelector(".connections-selected"),m=f.querySelector(".selected-connections-list"),g=f.querySelector(".new-connections-list"),v=document.getElementById("dt-connection-search"),y=f.querySelector(".syndicate-button"),h=f.querySelector(".action-wrapper"),L=document.getElementById("dt-post-status"),T=document.getElementById("dt-as-draft");c.appendChild(f),(0,a.default)(c).hoverIntent(r,300,o),(0,a.default)(y).on("click",function(){if(!h.classList.contains("loading")){h.classList.add("loading");var n={action:"dt_push",nonce:s.dt.nonce,connections:d,postId:s.dt.postId};n.postStatus=null!==T&&T.checked?"draft":L.value;var r=!!s.dt.usexhr&&{withCredentials:!0};a.default.ajax({url:s.dt.ajaxurl,xhrFields:r,method:"post",data:n}).done(function(n){setTimeout(function(){if(h.classList.remove("loading"),!n.data||!n.data.results)return void e();t(n.data.results)},500)}).error(function(){setTimeout(function(){h.classList.remove("loading"),e()},500)})}}),(0,a.default)(f).on("click",".add-connection",function(e){if("A"!==e.target.nodeName&&(e.preventDefault(),!e.currentTarget.classList.contains("syndicated")))if(e.currentTarget.classList.contains("added")){var t=e.currentTarget.getAttribute("data-connection-type"),r=e.currentTarget.getAttribute("data-connection-id"),o=m.querySelector('[data-connection-id="'+r+'"][data-connection-type="'+t+'"]');o.parentNode.removeChild(o),delete d[t+r],Object.keys(d).length||p.classList.add("empty"),n()}else{var a=e.currentTarget.getAttribute("data-connection-type"),c=e.currentTarget.getAttribute("data-connection-id");d[a+c]=s.dtConnections[a+c],p.classList.remove("empty");var i=e.currentTarget.cloneNode();i.innerText=e.currentTarget.innerText;var u=document.createElement("span");u.classList.add("remove-connection"),i.appendChild(u),i.classList="added-connection",m.appendChild(i),n()}}),(0,a.default)(f).on("click",".remove-connection",function(e){e.currentTarget.parentNode.parentNode.removeChild(e.currentTarget.parentNode);var t=e.currentTarget.parentNode.getAttribute("data-connection-type"),r=e.currentTarget.parentNode.getAttribute("data-connection-id");delete d[t+r],Object.keys(d).length||p.classList.add("empty"),n()}),(0,a.default)(v).on("keyup change",i.default.debounce(function(e){""===e.currentTarget.value&&n(s.dtConnections),u=e.currentTarget.value.replace(/https?:\/\//i,"").replace(/www/i,"").replace(/[^0-9a-zA-Z ]+/,""),n()},300))}})}]);
//# sourceMappingURL=push.min.js.map