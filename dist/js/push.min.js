!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}({0:function(e,t){e.exports=window},1:function(e,t){e.exports=jQuery},15:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(2),i=n.n(o),c=n(0),s=n(7),l=n.n(s),u={},d="",p=i.a.memoize((function(e){var t=document.getElementById(e);if(!t)return!1;if(t.attributes.template)return l.a.parse(t.innerHTML),"mustache";return i.a.template(t.innerHTML,null,{evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g})}));a()(window).on("load",(function(){var e=document.querySelector("#wp-admin-bar-distributor > a"),t=document.querySelector("#wp-admin-bar-distributor"),n=document.querySelector("#wp-admin-bar-distributor #wp-admin-bar-distributor-placeholder"),r=document.querySelector("#distributor-push-wrapper");if(n&&r){var o="",s="",f="",h="",v="",m="",g="",y="",b="",w="",L="",T="";n.appendChild(r),e.addEventListener("keydown",(function(e){13===e.keyCode&&S()}),!1),e.addEventListener("touchstart",S,!1),e.addEventListener("mouseenter",S,!1),a()(r).on("click",".syndicate-button",(function(){if(!t.classList.contains("syncing")){t.classList.add("syncing");var e={action:"dt_push",nonce:c.dt.nonce,connections:u,postId:c.dt.postId};e.postStatus=null!==L&&L.checked?"draft":w.value;var n=!!c.dt.usexhr&&{withCredentials:!0};a.a.ajax({url:c.dt.ajaxurl,xhrFields:n,method:"post",data:e}).done((function(e){setTimeout((function(){var n,a,l;(t.classList.remove("syncing"),e.success)?e.data&&e.data.results?(n=e.data.results,a=!1,l={},["internal","external"].map((function(e){i.a.each(n[e],(function(t,n){"success"===t.status&&(o["".concat(e).concat(n)].syndicated=t.url,a=!0),i.a.isEmpty(t.errors)||(l["".concat(e).concat(n)]=t.errors)}))})),i.a.isEmpty(l)||C(i.a.map(l,(function(e,t){return"".concat(o[t].name,":\n").concat(i.a.map(e,(function(e){return"- ".concat(e,"\n")})))}))),a&&i.a.isEmpty(l)&&(r.classList.add("message-success"),s.classList.add("empty"),f.innerText="",setTimeout((function(){r.classList.remove("message-success")}),6e3)),u={},k()):C(c.dt.messages.empty_result):C(e.data)}),500)})).error((function(e,n,r){setTimeout((function(){t.classList.remove("syncing"),C("".concat(c.dt.messages.ajax_error," ").concat(r))}),500)}))}})),a()(r).on("click",".add-connection",(function(e){if("A"!==e.target.nodeName&&(e.preventDefault(),!e.currentTarget.classList.contains("syndicated")))if(e.currentTarget.classList.contains("added")){var t=e.currentTarget.getAttribute("data-connection-type"),n=e.currentTarget.getAttribute("data-connection-id"),r=f.querySelector('[data-connection-id="'.concat(n,'"][data-connection-type="').concat(t,'"]'));r.parentNode.removeChild(r),delete u[t+n],g.classList.contains("unavailable")&&E("all"),Object.keys(u).length||(E("addEmpty"),E("noneUnavailable")),k()}else{var a=e.currentTarget.getAttribute("data-connection-type"),i=e.currentTarget.getAttribute("data-connection-id");u[a+i]=o[a+i];var c=e.currentTarget.cloneNode(!0),s=document.createElement("span");s.classList.add("remove-connection"),c.appendChild(s),c.classList="added-connection",f.appendChild(c),y.classList.contains("unavailable")&&(E("removeEmpty"),E("none")),Object.keys(u).length==m&&E("allUnavailable"),k()}})),a()(r).on("click",".selectall-connections",(function(){a()(h).children(".add-connection").each((function(e,t){if(!t.classList.contains("syndicated")&&!t.classList.contains("added")){var n=t.getAttribute("data-connection-type"),r=t.getAttribute("data-connection-id");u[n+r]=o[n+r];var a=t.cloneNode();a.innerText=t.innerText;var i=document.createElement("span");i.classList.add("remove-connection"),a.appendChild(i),a.classList="added-connection",f.appendChild(a),""!==m&&(E("removeEmpty"),E("allUnavailable"),E("none"))}})),k()})),a()(r).on("click",".selectno-connections",(function(){for(;f.firstChild;){var e=f.firstChild.getAttribute("data-connection-type"),t=f.firstChild.getAttribute("data-connection-id");delete u[e+t],f.removeChild(f.firstChild)}""!==m&&(E("addEmpty"),E("noneUnavailable"),E("all")),k()})),a()(r).on("click",".added-connection",(function(e){e.currentTarget.parentNode.removeChild(e.currentTarget);var t=e.currentTarget.getAttribute("data-connection-type"),n=e.currentTarget.getAttribute("data-connection-id");delete u[t+n],g.classList.contains("unavailable")&&E("all"),Object.keys(u).length||(E("addEmpty"),E("noneUnavailable")),k()}))}function x(){null!==(h=r.querySelector(".new-connections-list"))&&(v=h.querySelectorAll(".add-connection"),i.a.each(v,(function(e){e.classList.contains("syndicated")&&(e.disabled=!0)})))}function C(e){r.classList.add("message-error"),T.innerText="",i.a.each(function(e){if(!i.a.isArray(e))return[e];return i.a.map(e,(function(e){return i.a.isString(e)?e:i.a.has(e,"message")?e.message:void 0}))}(e),(function(e){var t=document.createElement("li");t.innerText=e,T.appendChild(t)}))}function k(){h.innerText="";var e=p("dt-add-connection"),t="";i.a.each(o,(function(n){if(""!==d){var r=n.name.replace(/[^0-9a-zA-Z ]+/,"").toLowerCase().match(d.toLowerCase()),a=n.url.replace(/https?:\/\//i,"").replace(/www/i,"").replace(/[^0-9a-zA-Z ]+/,"").toLowerCase().match(d.toLowerCase());if(!r&&!a)return}"mustache"===e?(u[n.type+n.id]?n.added=!0:n.added=!1,"internal"===n.type&&(n.internal=!0),t=l.a.render(document.getElementById("dt-add-connection").innerHTML,{connection:n})):t=e({connection:n,selectedConnections:u}),h.innerHTML+=t})),""===h.innerHTML&&(h.innerHTML='<p class="no-results">No results</p>'),"mustache"===e&&x()}function E(e){switch(e){case"addEmpty":s.classList.add("empty");break;case"removeEmpty":s.classList.remove("empty");break;case"allUnavailable":g.classList.add("unavailable");break;case"all":g.classList.remove("unavailable");break;case"noneUnavailable":y.classList.add("unavailable");break;case"none":y.classList.remove("unavailable")}}function S(){if(n.focus(),!r.classList.contains("loaded")){r.classList.remove("message-error"),r.classList.add("loaded");var e={action:"dt_load_connections",loadConnectionsNonce:c.dt.loadConnectionsNonce,postId:c.dt.postId},t=p("dt-show-connections"),u=!!c.dt.usexhr&&{withCredentials:!0};a.a.ajax({url:c.dt.ajaxurl,xhrFields:u,method:"post",data:e}).done((function(e){if(!e.success||!e.data)return r.classList.remove("loaded"),void r.classList.add("message-error");if(o=e.data,"mustache"===t){var n={connections:[]};i.a.each(o,(function(e){"internal"===e.type&&(e.internal=!0),n.connections.push(e)})),r.innerHTML=l.a.render(document.getElementById("dt-show-connections").innerHTML,{connections:n.connections,foundConnections:n.connections.length,showSearch:5<n.connections.length}),x()}else r.innerHTML=t({connections:o});s=r.querySelector(".connections-selected"),f=r.querySelector(".selected-connections-list"),h=r.querySelector(".new-connections-list"),g=r.querySelector(".selectall-connections"),y=r.querySelector(".selectno-connections"),b=document.getElementById("dt-connection-search"),w=document.getElementById("dt-post-status"),L=document.getElementById("dt-as-draft"),T=document.querySelector(".dt-error ul.details"),null!==h&&(v=h.querySelectorAll(".add-connection")),a()(b).on("keyup change",i.a.debounce((function(e){""===e.currentTarget.value&&k(),d=e.currentTarget.value.replace(/https?:\/\//i,"").replace(/www/i,"").replace(/[^0-9a-zA-Z ]+/,""),k()}),300)),i.a.each(v,(function(e){e.classList.contains("syndicated")||(g.classList.remove("unavailable"),m++)}))})).error((function(){r.classList.remove("loaded"),r.classList.add("message-error")}))}}}))},2:function(e,t){e.exports=_},7:function(e,t,n){e.exports=function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var o=RegExp.prototype.test,i=/\S/;function c(e){return!function(e,t){return o.call(e,t)}(i,e)}var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},l=/\s*/,u=/\s+/,d=/\s*=/,p=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function h(e){this.string=e,this.tail=e,this.pos=0}function v(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function m(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},h.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},v.prototype.push=function(e){return new v(e,this)},v.prototype.lookup=function(e){var t,r,o,i=this.cache;if(i.hasOwnProperty(e))t=i[e];else{for(var c,s,l,u=this,d=!1;u;){if(e.indexOf(".")>0)for(c=u.view,s=e.split("."),l=0;null!=c&&l<s.length;)l===s.length-1&&(d=a(c,s[l])||(r=c,o=s[l],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(o))),c=c[s[l++]];else c=u.view[e],d=a(u.view,e);if(d){t=c;break}u=u.parent}i[e]=t}return n(t)&&(t=t.call(this.view)),t},m.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},m.prototype.parse=function(e,n){var a=this.templateCache,o=e+":"+(n||g.tags).join(":"),i=void 0!==a,s=i?a.get(o):void 0;return null==s&&(s=function(e,n){if(!e)return[];var a,o,i,s=!1,v=[],m=[],y=[],b=!1,w=!1,L="",T=0;function x(){if(b&&!w)for(;y.length;)delete m[y.pop()];else y=[];b=!1,w=!1}function C(e){if("string"==typeof e&&(e=e.split(u,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(r(e[0])+"\\s*"),o=new RegExp("\\s*"+r(e[1])),i=new RegExp("\\s*"+r("}"+e[1]))}C(n||g.tags);for(var k,E,S,j,A,U,_=new h(e);!_.eos();){if(k=_.pos,S=_.scanUntil(a))for(var q=0,O=S.length;q<O;++q)c(j=S.charAt(q))?(y.push(m.length),L+=j):(w=!0,s=!0,L+=" "),m.push(["text",j,k,k+1]),k+=1,"\n"===j&&(x(),L="",T=0,s=!1);if(!_.scan(a))break;if(b=!0,E=_.scan(f)||"name",_.scan(l),"="===E?(S=_.scanUntil(d),_.scan(d),_.scanUntil(o)):"{"===E?(S=_.scanUntil(i),_.scan(p),_.scanUntil(o),E="&"):S=_.scanUntil(o),!_.scan(o))throw new Error("Unclosed tag at "+_.pos);if(A=">"==E?[E,S,k,_.pos,L,T,s]:[E,S,k,_.pos],T++,m.push(A),"#"===E||"^"===E)v.push(A);else if("/"===E){if(!(U=v.pop()))throw new Error('Unopened section "'+S+'" at '+k);if(U[1]!==S)throw new Error('Unclosed section "'+U[1]+'" at '+k)}else"name"===E||"{"===E||"&"===E?w=!0:"="===E&&C(S)}if(x(),U=v.pop())throw new Error('Unclosed section "'+U[1]+'" at '+_.pos);return function(e){for(var t,n=[],r=n,a=[],o=0,i=e.length;o<i;++o)switch((t=e[o])[0]){case"#":case"^":r.push(t),a.push(t),r=t[4]=[];break;case"/":a.pop()[5]=t[2],r=a.length>0?a[a.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],a=0,o=e.length;a<o;++a)(t=e[a])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(m))}(e,n),i&&a.set(o,s)),s},m.prototype.render=function(e,t,n,r){var a=this.parse(e,r),o=t instanceof v?t:new v(t,void 0);return this.renderTokens(a,o,n,e,r)},m.prototype.renderTokens=function(e,t,n,r,a){for(var o,i,c,s="",l=0,u=e.length;l<u;++l)c=void 0,"#"===(i=(o=e[l])[0])?c=this.renderSection(o,t,n,r):"^"===i?c=this.renderInverted(o,t,n,r):">"===i?c=this.renderPartial(o,t,n,a):"&"===i?c=this.unescapedValue(o,t):"name"===i?c=this.escapedValue(o,t):"text"===i&&(c=this.rawValue(o)),void 0!==c&&(s+=c);return s},m.prototype.renderSection=function(e,r,a,o){var i=this,c="",s=r.lookup(e[1]);if(s){if(t(s))for(var l=0,u=s.length;l<u;++l)c+=this.renderTokens(e[4],r.push(s[l]),a,o);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)c+=this.renderTokens(e[4],r.push(s),a,o);else if(n(s)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(r.view,o.slice(e[3],e[5]),(function(e){return i.render(e,r,a)})))&&(c+=s)}else c+=this.renderTokens(e[4],r,a,o);return c}},m.prototype.renderInverted=function(e,n,r,a){var o=n.lookup(e[1]);if(!o||t(o)&&0===o.length)return this.renderTokens(e[4],n,r,a)},m.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),a=e.split("\n"),o=0;o<a.length;o++)a[o].length&&(o>0||!n)&&(a[o]=r+a[o]);return a.join("\n")},m.prototype.renderPartial=function(e,t,r,a){if(r){var o=n(r)?r(e[1]):r[e[1]];if(null!=o){var i=e[6],c=e[5],s=e[4],l=o;return 0==c&&s&&(l=this.indentPartial(o,s,i)),this.renderTokens(this.parse(l,a),t,r,l,a)}}},m.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},m.prototype.escapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return g.escape(n)},m.prototype.rawValue=function(e){return e[1]};var g={name:"mustache.js",version:"4.0.1",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){y.templateCache=e},get templateCache(){return y.templateCache}},y=new m;return g.clearCache=function(){return y.clearCache()},g.parse=function(e,t){return y.parse(e,t)},g.render=function(e,n,r,a){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(t(o=e)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)');var o;return y.render(e,n,r,a)},g.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return s[e]}))},g.Scanner=h,g.Context=v,g.Writer=m,g}()}});
//# sourceMappingURL=push.min.js.map