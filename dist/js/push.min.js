!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}({0:function(e,t){e.exports=window},1:function(e,t){e.exports=jQuery},12:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(2),r=n.n(c),i=n(0),s={},d="",l=r.a.memoize((function(e){var t=document.getElementById(e);if(!t)return!1;return r.a.template(t.innerHTML,null,{evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g})}));o()(window).on("load",(function(){var e=document.querySelector("#wp-admin-bar-distributor > a"),t=document.querySelector("#wp-admin-bar-distributor"),n=document.querySelector("#wp-admin-bar-distributor #wp-admin-bar-distributor-placeholder"),a=document.querySelector("#distributor-push-wrapper");if(n&&a){var c="",u="",p="",m="",f="",v="",y="",b="",g="",L="",h="";n.appendChild(a),e.addEventListener("keydown",(function(e){13===e.keyCode&&x()}),!1),e.addEventListener("touchstart",x,!1),e.addEventListener("mouseenter",x,!1),o()(a).on("click",".syndicate-button",(function(){if(!t.classList.contains("syncing")){t.classList.add("syncing");var e={action:"dt_push",nonce:i.dt.nonce,connections:s,postId:i.dt.postId};e.postStatus=null!==h&&h.checked?"draft":L.value;var n=!!i.dt.usexhr&&{withCredentials:!0};o.a.ajax({url:i.dt.ajaxurl,xhrFields:n,method:"post",data:e}).done((function(e){setTimeout((function(){var n,o;(t.classList.remove("syncing"),e.data&&e.data.results)?(n=e.data.results,o=!1,["internal","external"].map((function(e){r.a.each(n[e],(function(t,n){"fail"===t.status?o=!0:c["".concat(e).concat(n)].syndicated=t.url}))})),o?T():(a.classList.add("message-success"),u.classList.add("empty"),p.innerText="",setTimeout((function(){a.classList.remove("message-success")}),6e3)),s={},w()):T()}),500)})).error((function(){setTimeout((function(){t.classList.remove("syncing"),T()}),500)}))}})),o()(a).on("click",".add-connection",(function(e){if("A"!==e.target.nodeName&&(e.preventDefault(),!e.currentTarget.classList.contains("syndicated")))if(e.currentTarget.classList.contains("added")){var t=e.currentTarget.getAttribute("data-connection-type"),n=e.currentTarget.getAttribute("data-connection-id"),a=p.querySelector('[data-connection-id="'.concat(n,'"][data-connection-type="').concat(t,'"]'));a.parentNode.removeChild(a),delete s[t+n],y.classList.contains("unavailable")&&C("all"),Object.keys(s).length||(C("addEmpty"),C("noneUnavailable")),w()}else{var o=e.currentTarget.getAttribute("data-connection-type"),r=e.currentTarget.getAttribute("data-connection-id");s[o+r]=c[o+r];var i=e.currentTarget.cloneNode(!0),d=document.createElement("span");d.classList.add("remove-connection"),i.appendChild(d),i.classList="added-connection",p.appendChild(i),b.classList.contains("unavailable")&&(C("removeEmpty"),C("none")),Object.keys(s).length==v&&C("allUnavailable"),w()}})),o()(a).on("click",".selectall-connections",(function(){o()(m).children(".add-connection").each((function(e,t){if(!t.classList.contains("syndicated")&&!t.classList.contains("added")){var n=t.getAttribute("data-connection-type"),a=t.getAttribute("data-connection-id");s[n+a]=c[n+a];var o=t.cloneNode();o.innerText=t.innerText;var r=document.createElement("span");r.classList.add("remove-connection"),o.appendChild(r),o.classList="added-connection",p.appendChild(o),""!==v&&(C("removeEmpty"),C("allUnavailable"),C("none"))}})),w()})),o()(a).on("click",".selectno-connections",(function(){for(;p.firstChild;){var e=p.firstChild.getAttribute("data-connection-type"),t=p.firstChild.getAttribute("data-connection-id");delete s[e+t],p.removeChild(p.firstChild)}""!==v&&(C("addEmpty"),C("noneUnavailable"),C("all")),w()})),o()(a).on("click",".added-connection",(function(e){e.currentTarget.parentNode.removeChild(e.currentTarget);var t=e.currentTarget.getAttribute("data-connection-type"),n=e.currentTarget.getAttribute("data-connection-id");delete s[t+n],y.classList.contains("unavailable")&&C("all"),Object.keys(s).length||(C("addEmpty"),C("noneUnavailable")),w()}))}function T(){a.classList.add("message-error"),setTimeout((function(){a.classList.remove("message-error")}),6e3)}function w(){m.innerText="",r.a.each(c,(function(e){if(""!==d){var t=e.name.replace(/[^0-9a-zA-Z ]+/,"").toLowerCase().match(d.toLowerCase()),n=e.url.replace(/https?:\/\//i,"").replace(/www/i,"").replace(/[^0-9a-zA-Z ]+/,"").toLowerCase().match(d.toLowerCase());if(!t&&!n)return}var a=l("dt-add-connection")({connection:e,selectedConnections:s});m.innerHTML+=a})),""===m.innerHTML&&(m.innerHTML='<p class="no-results">No results</p>')}function C(e){switch(e){case"addEmpty":u.classList.add("empty");break;case"removeEmpty":u.classList.remove("empty");break;case"allUnavailable":y.classList.add("unavailable");break;case"all":y.classList.remove("unavailable");break;case"noneUnavailable":b.classList.add("unavailable");break;case"none":b.classList.remove("unavailable")}}function x(){if(n.focus(),!a.classList.contains("loaded")){a.classList.remove("message-error"),a.classList.add("loaded");var e={action:"dt_load_connections",loadConnectionsNonce:i.dt.loadConnectionsNonce,postId:i.dt.postId},t=!!i.dt.usexhr&&{withCredentials:!0};o.a.ajax({url:i.dt.ajaxurl,xhrFields:t,method:"post",data:e}).done((function(e){if(!e.success||!e.data)return a.classList.remove("loaded"),void a.classList.add("message-error");c=e.data,a.innerHTML=l("dt-show-connections")({connections:c}),u=a.querySelector(".connections-selected"),p=a.querySelector(".selected-connections-list"),m=a.querySelector(".new-connections-list"),y=a.querySelector(".selectall-connections"),b=a.querySelector(".selectno-connections"),g=document.getElementById("dt-connection-search"),L=document.getElementById("dt-post-status"),h=document.getElementById("dt-as-draft"),null!==m&&(f=m.querySelectorAll(".add-connection")),o()(g).on("keyup change",r.a.debounce((function(e){""===e.currentTarget.value&&w(),d=e.currentTarget.value.replace(/https?:\/\//i,"").replace(/www/i,"").replace(/[^0-9a-zA-Z ]+/,""),w()}),300)),r.a.each(f,(function(e){e.classList.contains("syndicated")||(y.classList.remove("unavailable"),v++)}))})).error((function(){a.classList.remove("loaded"),a.classList.add("message-error")}))}}}))},2:function(e,t){e.exports=_}});
//# sourceMappingURL=push.min.js.map