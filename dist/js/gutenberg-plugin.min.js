(()=>{"use strict";const e=window.React,t=window.wp.primitives,i=(0,e.createElement)(t.SVG,{width:"20",height:"20",viewBox:"13.4 8.8 573.2 573.2",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(t.Path,{d:"M195.113 411.033c45.835 46.692 119.124 58.488 178.387 24.273 70.262-40.566 94.371-130.544 53.806-200.806-40.566-70.262-130.544-94.371-200.806-53.806-19.873 11.474-36.055 26.899-48.124 44.715l64.722 33.186c22.201-25.593 59.796-33.782 91.279-17.639 37.002 18.973 51.64 64.418 32.667 101.421-18.973 37.002-64.418 51.64-101.421 32.667-31.483-16.143-46.776-51.45-38.951-84.415l-81.702-41.892c-8.838-4.532-12.335-15.367-7.814-24.211 15.514-30.346 39.658-56.715 71.344-75.009 87.469-50.5 199.482-20.486 249.983 66.983 50.5 87.469 20.486 199.482-66.983 249.983-75.235 43.437-168.63 27.307-225.419-33.717-17.809 3.778-36.797-4.055-46.387-20.666-11.922-20.648-4.837-47.091 15.812-59.012 20.648-11.922 47.091-4.836 59.012 15.812 7.77 13.458 7.466 29.377.595 42.133Z"}),(0,e.createElement)(t.Path,{d:"M262.237 72.985C148.8 91.101 62 189.494 62 308c0 131.356 106.644 238 238 238s238-106.644 238-238c0-34.059-7.168-66.458-20.08-95.766-15.121.99-30.323-6.014-39.137-19.626-12.959-20.014-7.231-46.783 12.783-59.742 20.014-12.958 46.783-7.231 59.742 12.783 10.095 15.592 8.849 35.284-1.657 49.352C565.288 229.461 574 267.721 574 308c0 151.225-122.775 274-274 274S26 459.225 26 308C26 170.539 127.443 56.584 259.487 36.98 265.594 20.533 281.438 8.8 300 8.8c23.843 0 43.2 19.357 43.2 43.2 0 23.843-19.357 43.2-43.2 43.2-16.229 0-30.38-8.968-37.763-22.215Z"})),n=window.wp.components,r=window.wp.data,s=window.wp.editPost,o=window.wp.i18n,a=window.wp.plugins,l=window.wp.element,{document:d,dt:c,dtGutenberg:u,MouseEvent:m}=window,p=()=>{const t=d.body.classList;if(0!==parseInt(u.syndicationTime))return null;const i=d.querySelector("#wp-admin-bar-distributor"),n=d.querySelector("#wp-admin-bar-distributor > a");if(!i||!n)return(0,e.createElement)("div",{className:"distributor-toggle"},(0,e.createElement)("span",null,(0,o.__)("Refresh page to see distribution options","distributor")));const s=(0,r.select)("core/edit-post").isFeatureActive("fullscreenMode");return(0,e.createElement)("div",{className:"distributor-toggle"},(0,e.createElement)("button",{className:"components-button is-secondary",type:"button",onClick:()=>{const e=new m("mouseenter");s?t.add("is-showing-distributor"):t.remove("is-showing-distributor"),i.classList.toggle("hover"),n.dispatchEvent(e)}},(0,o.sprintf)((0,o.__)("Distribute %1$s","distributor"),u.postTypeSingular.toLowerCase()||(0,o._x)("content","generic term for post content","distributor"))))},b=()=>0!==parseInt(u.syndicationTime)?null:(0,e.createElement)("p",null,(0,o.__)("Distribution options available once published","distributor")),E=()=>0<parseInt(u.syndicationCount)?(0,e.createElement)(_,null):0!==parseInt(u.syndicationTime)?(0,e.createElement)(g,null):null,_=()=>(0,e.createElement)("span",{id:"distributed-to"},(0,o.sprintf)((0,o._n)("Distributed to %1$s connection.","Distributed to %1$s connections.",1*u.syndicationCount,"distributor"),u.syndicationCount)),g=()=>{const[t,r]=(0,l.useState)(!1),s=()=>r(!0),a=()=>r(!1);return parseInt(u.unlinked)?(0,e.createElement)("div",null,(0,e.createElement)("span",{id:"distributed-from"},(0,o.sprintf)((0,o.__)("Pulled on %1$s from %2$s","distributor"),u.syndicationTime,u.originalLocationName)),(0,e.createElement)("span",{id:"distributed-data"},(0,o.__)("This post has been unlinked from the ","distributor"),(0,e.createElement)("a",{href:u.postUrl},(0,o.__)("Original Content","distributor")),"."),(0,e.createElement)("span",{id:"distributed-restorelink",onClick:s}," ",(0,e.createElement)("span",{className:"dashicons dashicons-admin-links"}),(0,e.createElement)("a",{href:"javascript:void(0);"}," ",(0,o.__)("Restore link to Original","distributor"))),t&&(0,e.createElement)(n.Modal,{title:"Restore link to Original",icon:i,size:50,onRequestClose:a,className:"distributed-modal-popup",overlayClassName:"distributed-modal-overlay"},(0,e.createElement)("span",{id:"distributed-data"},(0,o.__)("Restoring the link to the ","distributor"),(0,e.createElement)("a",{href:u.postUrl},(0,o.__)("Original Content","distributor")),(0,o.__)(" will start updating this post automatically from the Original, overwriting current content.","distributor")),(0,e.createElement)("div",{className:"actions"},(0,e.createElement)("a",{href:u.linkNonceUrl,className:"button"},(0,e.createElement)("span",{className:"dashicons dashicons-admin-links"}),(0,o.__)("Restore link","distributor")),(0,e.createElement)("span",{id:"close",onClick:a,"aria-label":"Cancel"}," ",(0,e.createElement)("a",{href:"javascript:void(0);"}," ",(0,o.__)("Cancel","distributor")))))):(0,e.createElement)("div",null,(0,e.createElement)("span",{id:"distributed-from"},(0,o.sprintf)((0,o.__)("Pulled & linked on %1$s from %2$s","distributor"),u.syndicationTime,u.originalLocationName)),(0,e.createElement)("span",{id:"distributed-data"},(0,o.__)("Updating the ","distributor"),(0,e.createElement)("a",{href:u.postUrl},(0,o.__)("Original Content","distributor")),", ",(0,o.__)("will update this post automatically.","distributor")),(0,e.createElement)("span",{id:"distributed-unlink",onClick:s}," ",(0,e.createElement)("a",{href:"javascript:void(0);"}," ",(0,e.createElement)("span",{className:"dashicons dashicons-editor-unlink"}),(0,o.__)("Unlink from Original","distributor"))),t&&(0,e.createElement)(n.Modal,{title:"Unlink from Original",icon:i,size:50,onRequestClose:a,className:"distributed-modal-popup",overlayClassName:"distributed-modal-overlay"},(0,e.createElement)("p",{dangerouslySetInnerHTML:{__html:(0,o.sprintf)((0,o.__)("Unlinking from the %1$sOriginal Content%2$s will stop updating this post automatically.","distributor"),'<a href="'+u.postUrl+'">',"</a>")}}),(0,e.createElement)(n.Flex,{justify:"flex-start",className:"actions"},(0,e.createElement)(n.Button,{icon:(0,e.createElement)(n.Icon,{icon:"editor-unlink"}),variant:"secondary",href:u.unlinkNonceUrl},(0,o.__)("Unlink","distributor")),(0,e.createElement)(n.Button,{variant:"link",onClick:a},(0,o.__)("Cancel","distributor")))))},w=()=>(0,e.createElement)(n.Icon,{className:"components-panel__icon",icon:i,size:20}),h=0!==parseInt(u.unlinked),f=()=>h?(0,o.__)("Unlinked Content","distributor"):(0,o.__)("Pulled Content","distributor");(0,a.registerPlugin)("distributor-plugin",{render:()=>{const t=(0,r.useSelect)((e=>e("core/editor").getCurrentPostType())),i=(0,r.useSelect)((e=>e("core/editor").getCurrentPostAttribute("status"))),n=d.querySelector("#wp-admin-bar-distributor"),o=(0,r.useSelect)((e=>e("core/editor").getCurrentPost()));return u.noPermissions&&1===parseInt(u.noPermissions)||u.supportedPostTypes&&void 0===u.supportedPostTypes[t]?null:(c.postTitle=o.title,c.postStatus=o.status,u.supportedPostStati&&!u.supportedPostStati.includes(i)?(n?.classList.add("hide"),(0,e.createElement)(s.PluginDocumentSettingPanel,{title:(0,e.createElement)(f,null),icon:w,className:"distributor-panel"},(0,e.createElement)(b,null),(0,e.createElement)(E,null))):(n?.classList.remove("hide"),(0,e.createElement)(s.PluginDocumentSettingPanel,{title:(0,e.createElement)(f,null),icon:w,className:"distributor-panel"},(0,e.createElement)(p,null),(0,e.createElement)(E,null))))}})})();