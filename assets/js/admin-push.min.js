!function(a){function b(a){return a?(g.innerText=a,void setTimeout(function(){g.innerText=""},4e3)):void(g.innerText="")}function c(b){a.each(b.internal,function(a,b){var c=j.querySelector('.row.connection[data-connection-id="'+parseInt(a)+'"]');if("success"===b.status){c.classList.add("success");var d=c.querySelector(".last-syndicated");d.innerText=b.date}else c.classList.add("fail");setTimeout(function(){c.classList.remove("success"),c.classList.remove("fail")},4e3)}),a.each(b.external,function(a,b){var c=h.querySelector('.row.connection[data-connection-id="'+parseInt(a)+'"]');if("success"===b.status){c.classList.add("success");var d=c.querySelector(".last-syndicated");d.innerText=b.date}else c.classList.add("fail");setTimeout(function(){c.classList.remove("success"),c.classList.remove("fail")},4e3)})}var d=document.getElementsByClassName("js-syndicate")[0],e=document.getElementById("post_ID"),f=document.getElementById("sy_push"),g=f.querySelector(".message"),h=document.querySelector(".external-connections-table");if(h)var i=h.getElementsByClassName("js-connection-checkbox");var j=document.querySelector(".internal-connections-table");if(j)var k=j.getElementsByClassName("js-connection-checkbox");var l=0;a(f).on("click","input[type=checkbox]",function(a){a.currentTarget.checked?l++:l--,0>=l?d.disabled=!0:d.disabled=!1}),a(f).on("click",".check",function(b){if(b.preventDefault(),b.currentTarget.classList.contains("check")){var c=b.currentTarget.getAttribute("data-check"),d=b.currentTarget.parentNode.parentNode.parentNode,e=d.querySelectorAll(".js-connection-checkbox");a.each(e,function(a,b){"all"===c?(b.click(),b.checked=!0):(b.click(),b.checked=!1)})}}),a(d).on("click",function(d){d.preventDefault(),d.stopPropagation(),b(!1),f.classList.add("loading");var g=[],l=[];h&&a.each(i,function(a,b){b.checked&&g.push(b.getAttribute("data-external-connection-id"))}),j&&a.each(k,function(a,b){b.checked&&l.push(b.getAttribute("data-blog-id"))}),a.ajax({url:ajaxurl,method:"post",data:{action:"sy_push",nonce:sy.nonce,external_connections:g,internal_connections:l,post_id:e.value}}).done(function(a){setTimeout(function(){f.classList.remove("loading"),c(a.data.results),b(sy.successful_syndication)},500)}).error(function(){setTimeout(function(){f.classList.remove("loading"),b(sy.failed_syndication)},500)})})}(jQuery);